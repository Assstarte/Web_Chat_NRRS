(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},21:function(e,t,n){},24:function(e,t,n){},30:function(e,t,n){e.exports=n(56)},35:function(e,t,n){},37:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(25),c=n.n(a),s=(n(35),n(2)),i=n(3),u=n(5),l=n(4),p=n(6),m=(n(37),n(13),function(e){function t(){var e,n;Object(s.a)(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={nick:n.props.data.nick,message:n.props.data.message,time:n.props.data.createdAt},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.time.slice(11,19);return r.a.createElement("div",{className:"chat-message"},r.a.createElement("h4",null,r.a.createElement("span",{className:"author"},this.state.nick),":","   ",this.state.message," ",r.a.createElement("span",{className:"timeStamp"},"   | ",e)),r.a.createElement("hr",null))}}]),t}(o.Component)),h=n(10),d=(n(14),n(7)),g=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).state={},e.inputNameRef=r.a.createRef(),e.inputTextRef=r.a.createRef(),e.sendMessage=e.sendMessage.bind(Object(h.a)(Object(h.a)(e))),e}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return console.log("Curr Room - "+this.props.currentRoom),r.a.createElement("div",{className:"inputs"},r.a.createElement("textarea",{name:"text",ref:this.inputTextRef,id:"message",placeholder:"Enter message..."}),r.a.createElement("button",{className:"raise send-msg-btn",onClick:function(t){return e.sendMessageToChatRoom(t,e.props.currentRoom)},value:"Send"},"Send >"))}},{key:"sendMessage",value:function(e){fetch("/api/message",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({text:this.inputTextRef.current.value})}).then(function(e){return e.json().then(function(e){return console.log(e)})}).catch(function(e){console.log(e)})}},{key:"sendMessageToChatRoom",value:function(e,t){fetch("/api/message/room/".concat(t),{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({text:this.inputTextRef.current.value,chatRoomId:t,userId:this.props.userId,user_name:this.props.user_name})}).then(function(e){return e.json().then(function(e){return console.log(e)})}).catch(function(e){console.log(e)})}}]),t}(o.Component),f=Object(d.b)(function(e){return{rooms:e.fetch.rooms,errorOccurred:e.fetch.errorOccurred,roomScreen:e.fetch.roomScreen,msgScreen:e.fetch.msgScreen,currentRoom:e.chat.currentRoom,userId:e.login.user_id,user_name:e.login.user_name}},{})(g),O=function(){return function(e){fetch("/api/rooms",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"GET"}).then(function(t){return t.json().then(function(t){return e({type:"FETCH_CHATROOMS",payload:t})}).catch(function(t){e({type:"ERROR_OCCURRED",payload:t})})})}},y=(n(21),function(e){var t=e.user_name,n=e.screenType,o=e.functionToExec;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"fixed-head"},r.a.createElement("h2",{style:{display:"inlineBlock",color:"#fff"}},"$_\u03a3ZIC > Welcome, ",t),"chat"===n?r.a.createElement("button",{onClick:"function"===typeof o?function(e){return o(e)}:function(e){return console.log("ERROR DURING EVENT HANDLING PASSAGE")},className:"pulse btn-login"},"Room Screen"):r.a.createElement("button",{onClick:"function"===typeof o?function(e){return o(e)}:function(e){return console.log("ERROR DURING EVENT HANDLING PASSAGE")},className:"pulse btn-login"},"Create New Room"),r.a.createElement("button",{className:"raise btn-signup"},"Logout")),r.a.createElement("hr",null))}),E=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).currentRoom=n.props.currentRoom,n.intervalID=null,n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(y,{user_name:this.props.user_name,screenType:"chat",functionToExec:this.redirectToRoomScreen.bind(this)}),r.a.createElement("div",{id:"chat"},this.props.messages.map(function(e){return r.a.createElement(m,{key:e.id,data:e})})),r.a.createElement(f,null))}},{key:"componentWillMount",value:function(){this.props.loggedIn||this.props.history.push("/login"),this.props.exec_fetch_messages(this.props.currentRoom)}},{key:"componentDidMount",value:function(){this.chatWindow=document.querySelector("#chat"),this.messageAmount=this.props.messages.length,console.info("Did Mount"+this.messageAmount),this.chatWindow.scrollTo(0,Number.MAX_SAFE_INTEGER),this.intervalID=this.loopedCheck(this.props.currentRoom)}},{key:"componentDidUpdate",value:function(){this.props.messages.length>this.messageAmount&&(this.messageAmount++,this.chatWindow.scrollTo({top:Number.MAX_SAFE_INTEGER,left:0,options:"smooth"}))}},{key:"loopedCheck",value:function(e){return setInterval(this.props.exec_fetch_messages.bind(this,e),1e3)}},{key:"redirectToRoomScreen",value:function(){clearInterval(this.intervalID),this.props.history.push("/rooms")}}]),t}(o.Component),b=Object(d.b)(function(e){return{rooms:e.fetch.rooms,messages:e.fetch.messages,errorOccurred:e.fetch.errorOccurred,roomScreen:e.fetch.roomScreen,msgScreen:e.fetch.msgScreen,currentRoom:e.chat.currentRoom,user_name:e.login.user_name,loggedIn:e.login.loggedIn}},{exec_fetch_messages:function(e){return function(t){fetch("/api/message/".concat(e),{headers:{Accept:"application/json","Content-Type":"application/json"},method:"GET"}).then(function(e){return e.json().then(function(e){return t({type:"FETCH_MESSAGES",payload:e})}).catch(function(e){t({type:"ERROR_OCCURRED",payload:e})})})}},exec_fetch_rooms:O})(E),v=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container demo"},r.a.createElement("h2",{style:{color:"#fff",textAlign:"center"}},"$_\u03a3ZIC"),r.a.createElement("hr",null),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("button",{onClick:function(t){return e.redirectToLogin(t)},className:"pulse btn-login home-screen-btn"},"Login"),r.a.createElement("button",{onClick:function(t){return e.redirectToSignup(t)},className:"raise btn-signup home-screen-btn"},"Sign Up")))}},{key:"componentWillMount",value:function(){this.props.exec_whoami()}},{key:"componentDidUpdate",value:function(){this.props.auth?this.props.history.push("/rooms"):console.log("Not Logged In")}},{key:"redirectToLogin",value:function(e){e.preventDefault(),this.props.history.push("/login")}},{key:"redirectToSignup",value:function(e){e.preventDefault(),this.props.history.push("/signup")}}]),t}(o.Component),R=Object(d.b)(function(e){return{auth:e.login.loggedIn,errorOccurred:e.login.errorOccurred,user_id:e.login.user_id}},{exec_whoami:function(){return function(e){fetch("/api/whoami").then(function(t){return t.json().then(function(t){return e({type:"WHOAMI",payload:t})})})}}})(v),_=function(e){var t=e.name,n=e.owner,o=e.enterRoom;return r.a.createElement("div",{className:"chat-room"},r.a.createElement("span",{className:"room-name"},t),r.a.createElement("button",{className:"raise enter-room",onClick:o},r.a.createElement("svg",{"aria-hidden":"true","data-prefix":"fas","data-icon":"door-open",className:"svg-inline--fa fa-door-open fa-w-20",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512"},r.a.createElement("path",{fill:"currentColor",d:"M624 448h-80V113.45C544 86.19 522.47 64 496 64H384v64h96v384h144c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM312.24 1.01l-192 49.74C105.99 54.44 96 67.7 96 82.92V448H16c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h336V33.18c0-21.58-19.56-37.41-39.76-32.17zM264 288c-13.25 0-24-14.33-24-32s10.75-32 24-32 24 14.33 24 32-10.75 32-24 32z"}))),r.a.createElement("span",null,"Owner: ",n))},j=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){this.props.exec_flush_current_room(),this.props.exec_fetch_rooms()}},{key:"componentDidMount",value:function(){this.props.exec_flush_current_room()}},{key:"componentDidUpdate",value:function(){this.props.currentRoom?this.props.history.push("/chat"):console.log("Select Room")}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(y,{user_name:this.props.user_name,functionToExec:this.createNewRoom.bind(this,this.props.user_name)}),r.a.createElement("div",{className:"container demo"},r.a.createElement("h2",{style:{color:"#fff",textAlign:"center"}},"$_ROOMS"),r.a.createElement("hr",null),r.a.createElement("div",{style:{textAlign:"center",color:"#fff"}},console.log(this.props.rooms),this.props.rooms.map(function(t){return r.a.createElement(_,{name:t.name,key:t.id,owner:t.owner_name,enterRoom:e.setCurrentRoom.bind(e,t.id)})}))))}},{key:"setCurrentRoom",value:function(e){this.props.exec_set_current_room(e)}},{key:"createNewRoom",value:function(e){fetch("/api/rooms",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({name:e,creator:this.props.user_id,creatorName:this.props.user_name})}).then(function(e){return e.json().then(function(e){return console.log(e)})}).catch(function(e){console.log(e)})}}]),t}(o.Component),S=Object(d.b)(function(e){return{rooms:e.fetch.rooms,errorOccurred:e.fetch.errorOccurred,roomScreen:e.fetch.roomScreen,msgScreen:e.fetch.msgScreen,currentRoom:e.chat.currentRoom,loggedIn:e.login.loggedIn,user_name:e.login.user_name,user_id:e.login.user_id}},{exec_fetch_rooms:O,exec_set_current_room:function(e){return function(t){t({type:"SET_CURRENT_ROOM",payload:e})}},exec_flush_current_room:function(){return function(e){e({type:"FLUSH_CURRENT_ROOM"})}}})(j),N=n(59),C=n(60),x=n(58),I=n(27),w=n.n(I),k=n(28),T=n(12),A=n(8),M={loggedIn:!1,errorOccurred:!1,user_id:null,user_name:null},D={roomScreen:!0,msgScreen:!1,rooms:[],messages:[],errorOccurred:!1},L={currentRoom:null,theme:"DARK"},U=Object(T.c)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":var n=t.payload;return!0===n.loggedIn?Object(A.a)({},e,{loggedIn:!0,errorOccurred:!1,user_id:n.id,user_name:n.login}):Object(A.a)({},e,{loggedIn:!1,errorOccurred:!0,user_id:null});case"SIGNUP":return t.payload.created?Object(A.a)({},e,{loggedIn:!1,errorOccurred:!1}):Object(A.a)({},e,{loggedIn:!1,errorOccurred:!0});case"WHOAMI":return console.log(t.payload),"DENIED"!==t.payload.session?(console.log("WORKING"),Object(A.a)({},e,{loggedIn:!0,errorOccurred:!1,user_id:t.payload.id,user_name:t.payload.login})):Object(A.a)({},e,{loggedIn:!1,errorOccurred:!1,user_id:null});default:return e}},fetch:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"FETCH_CHATROOMS":return console.log(n.payload),e=n.payload,console.log(e),e?Object(A.a)({},t,{rooms:e,errorOccurred:!1,msgScreen:!0,roomScreen:!1}):Object(A.a)({},t,{roomScreen:!0,errorOccurred:!0,msgScreen:!1});case"FETCH_MESSAGES":return(e=n.payload)?Object(A.a)({},t,{messages:e,errorOccurred:!1,msgScreen:!0,roomScreen:!1}):Object(A.a)({},t,{roomScreen:!1,errorOccurred:!0,msgScreen:!0});default:return t}},chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_ROOM":return console.log(t.payload),Object(A.a)({},e,{currentRoom:t.payload});case"FLUSH_CURRENT_ROOM":return Object(A.a)({},e,{currentRoom:null});default:return e}}}),G=localStorage.getItem("reduxState")?JSON.parse(localStorage.getItem("reduxState")):{},P=[k.a],H=Object(T.d)(U,G,T.a.apply(void 0,P)),F=(n(24),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).inputLoginRef=r.a.createRef(),n.inputPassRef=r.a.createRef(),n.execute_login=n.execute_login.bind(Object(h.a)(Object(h.a)(n))),n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(){this.props.loggedIn?window.location.href="/rooms":console.log("Oops! Invalid Credentials")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",{className:"login-form",id:"auth",method:"post"},r.a.createElement("p",{className:"login-text"}),r.a.createElement("input",{ref:this.inputLoginRef,type:"text",name:"un",className:"login-username",autoFocus:!0,required:!0,placeholder:"Login",id:"auth-login"}),r.a.createElement("input",{ref:this.inputPassRef,type:"password",name:"pw",className:"login-password",required:!0,placeholder:"Password",id:"auth-pass"}),r.a.createElement("input",{type:"submit",name:"Login",value:"Login",className:"login-submit",id:"auth-submit",onClick:function(t){return e.execute_login(t)}})),r.a.createElement("a",{href:"#",className:"login-forgot-pass"},"forgot password?"),r.a.createElement("div",{className:"underlay-photo"}),r.a.createElement("div",{className:"underlay-black"}))}},{key:"execute_login",value:function(e){e.preventDefault(),console.log("handling"),this.props.exec_login(this.inputLoginRef.current.value,this.inputPassRef.current.value)}}]),t}(o.Component)),W=Object(d.b)(function(e){return{loggedIn:e.login.loggedIn,errorOccurred:e.login.errorOccurred,user_id:e.login.user_id}},{exec_login:function(e,t){return function(n){fetch("/api/login",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({login:e,password:t})}).then(function(e){return e.json().then(function(e){return n({type:"LOGIN",payload:e})}).catch(function(e){n({type:"ERROR_OCCURRED",payload:e})})})}}})(F),J=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).inputLoginRef=r.a.createRef(),n.inputPassRef=r.a.createRef(),n.execute_signup=n.execute_signup.bind(Object(h.a)(Object(h.a)(n))),n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(){this.props.loggedIn?window.location.href="/rooms":console.log("Oops! Invalid Credentials")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",{className:"login-form",id:"auth",method:"post"},r.a.createElement("p",{className:"login-text"}),r.a.createElement("input",{ref:this.inputLoginRef,type:"text",name:"un",className:"login-username",autoFocus:!0,required:!0,placeholder:"Login",id:"auth-login"}),r.a.createElement("input",{ref:this.inputPassRef,type:"password",name:"pw",className:"login-password",required:!0,placeholder:"Password",id:"auth-pass"}),r.a.createElement("input",{type:"submit",name:"Signup",value:"Signup",className:"login-submit",id:"auth-submit",onClick:function(t){return e.execute_signup(t)}})),r.a.createElement("a",{href:"#",className:"login-forgot-pass"},"forgot password?"),r.a.createElement("div",{className:"underlay-photo"}),r.a.createElement("div",{className:"underlay-black"}))}},{key:"execute_signup",value:function(e){e.preventDefault(),console.log("handling"),this.props.exec_signup(this.inputLoginRef.current.value,this.inputPassRef.current.value)}}]),t}(o.Component),q=Object(d.b)(function(e){return{loggedIn:e.login.loggedIn,errorOccurred:e.login.errorOccurred,user_id:e.login.user_id}},{exec_signup:function(e,t){return function(n){fetch("/api/signup",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({login:e,password:t})}).then(function(e){return e.json().then(function(e){return n({type:"SIGNUP",payload:e})}).catch(function(e){n({type:"ERROR_OCCURRED",payload:e})})})}}})(J),V=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,{store:H},r.a.createElement("div",{id:"root"},r.a.createElement(N.a,{history:w()()},r.a.createElement("div",null,r.a.createElement(C.a,null,r.a.createElement(x.a,{path:"/",component:H.getState().login.loggedIn?S:R,exact:!0}),r.a.createElement(x.a,{path:"/home",component:R}),r.a.createElement(x.a,{path:"/chat",component:b}),r.a.createElement(x.a,{path:"/rooms",component:S}),r.a.createElement(x.a,{path:"/login",component:W}),r.a.createElement(x.a,{path:"/signup",component:q}))))))}}]),t}(o.Component);H.subscribe(function(){localStorage.setItem("reduxState",JSON.stringify(H.getState()))});var B=V;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[30,2,1]]]);
//# sourceMappingURL=main.bc00d714.chunk.js.map